# 活动室预约系统

一个基于 Streamlit 构建的活动室预约管理系统，支持未来7天活动室的在线预约功能。

## 功能特点

- 📅 **动态预约**：可预约从今天开始的未来7天活动室
- 🏫 **多教室支持**：每个时段提供2个教室（207、211）可选择预约
- 🕐 **多时段支持**：每天提供4个时段（上午2节课，下午2节课）
- 📝 **信息收集**：预约时需填写姓名、学号、班级、电话和预约原因
- 💾 **数据持久化**：预约信息自动保存到本地文件
- 📊 **直观展示**：日程表清晰显示每个时段的预约状态
- 🖱️ **点击跳转**：点击日程表中的任意时段，侧边栏会自动跳转到对应的预约选项
- 🔧 **管理功能**：管理员可管理预约记录和教室状态
- 🚫 **教室管理**：管理员可屏蔽或启用特定教室

## 教室配置

- **教室207**：活动室207
- **教室211**：活动室211
- **预约规则**：每个时段最多可预约2个教室，当两个教室都被预约后该时段显示为"已满"
- **屏蔽功能**：管理员可临时屏蔽教室，屏蔽后的教室不会出现在预约选项中

## 时段安排

- **上午第一节**：08:00-10:00
- **上午第二节**：10:00-12:00
- **下午第一节**：14:00-16:00
- **下午第二节**：16:00-18:00

## 安装与运行

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 运行应用

```bash
streamlit run app.py
```

### 3. 访问应用

应用启动后，在浏览器中访问 `http://localhost:8501`

## 使用说明

### 用户预约流程

**方法一：直接选择预约**
1. **选择日期**：在左侧栏选择要预约的日期（未来7天内的任意一天）
2. **选择时段**：选择具体的时间段
3. **选择教室**：从可用教室中选择一个207或211，排除被屏蔽的教室）
4. **检查状态**：系统会显示该时段的可用教室数量和屏蔽状态
5. **填写信息**：填写以下必填信息：
   - 姓名
   - 学号
   - 班级
   - 联系电话
   - 预约原因
6. **确认预约**：点击"确认预约"按钮完成预约

**方法二：点击日程表快速预约**
1. **查看日程表**：在主页面查看未来7天的完整日程表
2. **点击时段**：直接点击想要预约的时段按钮
   - ✅ 可预约：所有可用教室都可预约
   - ⚠️ 部分可约：还有部分教室可预约
   - ❌ 已满：所有可用教室都已被预约
   - 🚫 教室已屏蔽：所有教室都被管理员屏蔽
3. **自动跳转**：系统会自动在左侧栏选择对应的日期和时段
4. **选择教室**：从剩余可用教室中选择
5. **填写信息**：填写预约信息并确认预约

### 查看日程表

主页面中央显示未来7天的完整日程表，包括：
- 每天的所有时段状态
- 已预约时段显示预约人信息
- 可预约时段显示"可预约"状态
- 显示被屏蔽的教室信息

### 管理功能

#### 密码验证
- **管理员密码**：默认为 `admin123`
- **安全提醒**：在生产环境中请修改 `app.py` 中的 `ADMIN_PASSWORD` 常量

#### 预约管理 📋
- **查看记录**：所有预约记录以表格形式展示
- **删除指定预约**：管理员可选择删除特定的预约记录
- **清空所有预约**：管理员可清空所有预约数据（需二次确认）
- **统计信息**：显示总时段数、已预约数和可预约数

#### 教室管理 🏫
- **查看教室状态**：显示可用和已屏蔽的教室列表
- **屏蔽教室**：可选择特定教室进行屏蔽，屏蔽后该教室不会出现在预约选项中
- **启用教室**：恢复被屏蔽教室的可用状态
- **批量操作**：
  - 屏蔽所有教室（需二次确认）
  - 启用所有教室（一键恢复）

#### 统计信息 📊
- **各教室预约情况**：显示每个教室的预约数量和状态
- **各日期预约情况**：按日期统计预约数量
- **各时段预约情况**：按时段统计预约数量

## 数据存储

系统使用两个JSON文件存储数据：

### bookings.json
预约数据存储，包含以下信息：
- 预约人姓名、学号、班级、电话
- 预约教室（207或211）
- 预约原因
- 预约时间戳

### blocked_classrooms.json
屏蔽教室配置，包含：
- 被管理员屏蔽的教室列表
- 自动排除在预约选项外

## 技术栈

- **前端框架**：Streamlit
- **数据处理**：Pandas
- **数据存储**：JSON 文件
- **语言**：Python 3.7+

## 注意事项

- 每个时段只能被一个人预约
- 预约时间范围固定为未来7天
- 所有信息为必填项
- 数据会自动保存，应用重启后数据仍然存在
- 被屏蔽的教室不会出现在预约选项中，但已有的预约记录仍然保留
- 管理员可以随时启用或屏蔽教室

## 文件结构

```
活动预约/
├── app.py                    # 主应用文件
├── requirements.txt          # 依赖包列表
├── README.md                # 说明文档
├── bookings.json            # 预约数据文件（运行后自动生成）
└── blocked_classrooms.json  # 屏蔽教室配置文件（运行后自动生成）
```

## 更新日志

### v2.0 - 管理员增强版
- ✅ 新增教室管理功能（屏蔽/启用）
- ✅ 改进管理员界面，使用标签页组织功能
- ✅ 新增详细统计信息
- ✅ 优化日程表显示，支持屏蔽教室状态
- ✅ 新增批量教室操作功能
